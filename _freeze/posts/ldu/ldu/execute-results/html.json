{
  "hash": "0dbb5ab2ba299d8a3ead715d8bb609d3",
  "result": {
    "markdown": "---\ntitle: \"El trono en Ponceano: \"\nauthor: \"Daniel Sánchez\"\ndate: \"2023-10-26\"\ndescription: \"Liga Deportiva Universitaria demuestra una vez más su potencial internacional pasando a la final de la Copa Sudamericana 2023. En este post, hago un intento de *football analytics* mediante... Imagen generada con inteligencia artificial.\"\ncategories: [spanish, ecuador, football, data viz, R]\ncsl: ../../econometrics.csl\nimage: ldu_thumb.jpeg\nknitr:\n  opts_chunk: \n    message: false\n    warning: false\n    echo: true\n    include: true\nformat:\n  html:\n    code-fold: true\n    code-tools: true\n    code-summary: \"Show the code\"\n    code-overflow: wrap\n---\n\n\nDespués de casi 14 años desde su última final en un campeonato internacional, Liga Deportiva Universitaria de Quito (LDU) selló su pase a la final de la Copa Sudamericana (el segundo campeonato más importante del fútbol de clubes en Sudamérica). El triunfo de Liga no viene fácil: aunque se ganó la fama del *Rey de Copas* por los cuatro títulos internacionales ganados durante 2007-2010 (incluyendo la Copa Libertadores, el título más importante de América, nunca antes ganado por otro equipo ecuatoriano), al equipo le ha costado restaurar su gloria desde entonces. El 28 de Octubre Liga promete desempolvar el trono en Ponceano, el barrio de Quito donde se encuentra el Estadio Rodrigo Paz Delgado, la *Casa Blanca*. En homenaje al equipo y en la misma línea de los otros artículos de este blog, en este post reviso la trayectoria de Liga en la Copa Sudamericana mediante.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Cargar librerias\n\nlibrary(worldfootballR)\nlibrary(dplyr)\nlibrary(stringr)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loop para extraer informacion-copa-sudamericana\n\nyears <- seq(2014, 2022)\n\nsudamericana <- list()\n\nfor (i in years){\n  sudamericana[[which(years == i)]] <- fb_league_stats(gender = 'M',\n                                                       season_end_year = i,\n                                                       team_or_player = 'team',\n                                                       non_dom_league_url = \"https://fbref.com/en/comps/205/history/Copa-Sudamericana-Seasons\",\n                                                       stat_type = 'standard',\n                                                       country = NA,\n                                                       tier = NA)\n}\n\n# Extraer como un solo df y preparar\n\nsudamericana_df <- \n  bind_rows(sudamericana)  %>% \n  janitor::clean_names()  %>% \n  mutate(year = case_when(\n    url  %>% str_like('%2014%') ~ 2014,\n    url  %>% str_like('%2015%') ~ 2015,\n    url  %>% str_like('%2016%') ~ 2016,\n    url  %>% str_like('%2017%') ~ 2017,\n    url  %>% str_like('%2018%') ~ 2018,\n    url  %>% str_like('%2019%') ~ 2019,\n    url  %>% str_like('%2020%') ~ 2020,\n    url  %>% str_like('%2021%') ~ 2021,\n    url  %>% str_like('%2022%') ~ 2022,                                                        \n  ),\n  country = str_sub(squad, start = 1, end = 2)  %>% str_to_upper(),\n  team = str_sub(squad, start = 4, end = -1))  %>% \n  select(-squad)\n\n# Filtrar para entradas de LDU\n\nsudamericana_ldu <-\n  sudamericana_df  %>%\n  filter(team == 'LDU de Quito')\n\n# Extraer informacion de Copa Libertadores \n\nlibertadores <- list()\n\nfor (i in years){\n  libertadores[[which(years == i)]] <- fb_league_stats(gender = 'M',\n                                                       season_end_year = i,\n                                                       team_or_player = 'team',\n                                                       non_dom_league_url = \"https://fbref.com/en/comps/14/history/Copa-Libertadores-Seasons\",\n                                                       stat_type = 'standard',\n                                                       country = NA,\n                                                       tier = NA)\n}\n\n# Extraer como df y preparar\n\nlibertadores_df <- \n  bind_rows(libertadores)  %>% \n  janitor::clean_names()  %>% \n  mutate(year = case_when(\n    url  %>% str_like('%2014%') ~ 2014,\n    url  %>% str_like('%2015%') ~ 2015,\n    url  %>% str_like('%2016%') ~ 2016,\n    url  %>% str_like('%2017%') ~ 2017,\n    url  %>% str_like('%2018%') ~ 2018,\n    url  %>% str_like('%2019%') ~ 2019,\n    url  %>% str_like('%2020%') ~ 2020,\n    url  %>% str_like('%2021%') ~ 2021,\n    url  %>% str_like('%2022%') ~ 2022,                                                        \n  ),\n  country = str_sub(squad, start = 1, end = 2)  %>% str_to_upper(),\n  team = str_sub(squad, start = 4, end = -1))  %>% \n  select(-squad)\n\nlibertadores_ldu <-\n  libertadores_df  %>%\n  filter(team == 'LDU de Quito')\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}